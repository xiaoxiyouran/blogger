
<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

	<title>03_02 定义函数</title>
	<meta name="keywords" content="xiaoxiyouran" />
	<meta name="description" content="xiaoxiyouran's Docs" />
	<link href="../../../../packages/css/bootstrap.min.css" rel="stylesheet" />
	<link href="../../../../packages/css/style.css" rel="stylesheet" />
	<link href="../../../../packages/css/monokai_sublime.min.css" rel="stylesheet">
	
	<!-- 右上角的侧边导航栏 -->
	<link rel="stylesheet" href="../../../../packages/hock_side_bar/css/sidebar.css"> <!--初始化文件-->
	<script src="../../../../packages/hock_side_bar/js/sidebar.js"></script> <!--rem适配js-->
	
	<!--
	<link href="<?php echo $base_url?>/css/bootstrap-theme.min.css" rel="stylesheet" />
	-->
	
	<!-- To generate the side tree of the document itself. -->
  <link rel="stylesheet" href="../../../../packages/generate_header_sidebar/css/zTreeStyle/zTreeStyle.css" type="text/css">
  <style>
  body {
  background-color: white;
  margin:0; padding:0;
  // text-align: center;
  overflow: scroll;
  }
  div, p, table, th, td {
    list-style:none;
    margin:8px; padding:0;
    color:#333; font-size:12px;
   Font-family: Helvetica, Tahoma, Arial, STXihei, “华文细黑”, “Microsoft YaHei”, “微软雅黑”, SimSun, “宋体”, Heiti, “黑体”, sans-serif;
  }
  
 // table{
 //   border-collapse:collapse;
 // }

  //table, td, th{
  //  border:1px solid black;   
  //}
  
  .ztree li a.curSelectedNode {
    padding-top: 0px;
    background-color: #FFE6B0;
    color: black;
    height: 16px;
    border: 1px #FFB951 solid;
    opacity: 0.8;
  }
  .ztree{
    overflow: auto;
    height:100%;
    min-height: 200px;
    top: 0px;
  }
  </style>

<!--
  For Latex formula
-->
<!--
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {inlineMath: [["$","$"],["\(","\)"]]}
  });
</script>
-->
 <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {inlineMath: [["$","$"]]}
  });
</script>
 <script type="text/javascript" src="../../../../packages/MathJax/MathJax.js?config=TeX-AMS_HTML-full"></script>

<!-- mermaid 画图 -->
 <link rel="stylesheet" href="../../../../packages/mermaid-7.0.0/dist/mermaid.forest.css"/>
 <script src="../../../../packages/mermaid-7.0.0/dist/mermaid.js"></script>
 <script src="../../../../packages/mermaid-7.0.0/dist/dist/mermaid.full.js"></script>
 <!-- <scrpt src="../../../../packages/mermaid-7.0.0/node_modules/d3/d3.js"></scrpt> -->
 <!-- <script>mermaid.initialize({startOnLoad:true});</script>  -->
 <script>
	//browserify --entry src/mermaid.js -u d3 -o ./dist/mermaid.brow.slim.js
			var mermaid_config = {
					startOnLoad:true
			}
			mermaid.ganttConfig = {
					titleTopMargin:25,
					barHeight:20,
					barGap:4,
					topPadding:50,
					leftPadding:75,
					gridLineStartPadding:35,
					fontSize:11,
					numberSectionStyles:3,
					axisFormatter: [
							// Within a day
							["%I:%M", function (d) {
									return d.getHours();
							}],
							// Monday a week
							["w. %U", function (d) {
									return d.getDay() == 1;
							}],
							// Day within a week (not monday)
							["%a %d", function (d) {
									return d.getDay() && d.getDate() != 1;
							}],
							// within a month
							["%b %d", function (d) {
									return d.getDate() != 1;
							}],
							// Month
							["%m-%y", function (d) {
									return d.getMonth();
							}]
					]
			};
	</script>

</head>
<body>
<!-- 右上角的悬浮 sidebar  -->
<div id="mySidenav" class="sidenav">
  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
   <a href="#"> 目录 </a>
   <iframe id="ha" src=" ../../global_sidebar.html" name='left' frameborder="0" scrolling="auto" width="400"  height="100%">
    您的浏览器不支持iframe，请升级
   </iframe>  
</div>

<TABLE border=0 height=600px align=left>
  <TR>
    <TD width=260px align=left valign=top style="BORDER-RIGHT: #999999 1px dashed">
      <ul id="tree" class="ztree">
        
      </ul>
    </TD>
    <TD width=770px align=left valign=top>

<!---------------------------------------------------------------------------------------------------------------------------->
<div class="container">
<span style="font-size:20px;cursor:pointer;z-index: 9999; position: fixed; right: 0px; top: 0px;" onclick="openNav()">&#9776; 目录</span>
 
<h1 id="03_02">03_02 定义函数</h1>
<h2 id="_1">函数定义</h2>
<p>在Python中，定义一个函数要使用<code>def</code>语句，依次写出函数名、括号、括号中的参数和冒号<code>:</code>，然后，在缩进块中编写函数体，函数的返回值用<code>return</code>语句返回。</p>
<p>我们以自定义一个求绝对值的<code>my_abs</code>函数为例：</p>
<pre><code class="python">def my_abs(x):
	if x &gt;= 0:
		return x
	else:
		return -x
</code></pre>

<p><br></p>
<h3 id="return">return</h3>
<p>请注意，函数体内部的语句在执行时，一旦执行到<code>return</code>时，函数就执行完毕，并将结果返回。因此，函数内部通过条件判断和循环可以实现非常复杂的逻辑。</p>
<p>如果<mark>没有<code>return</code>语句，函数执行完毕后也会返回结果，只是结果为<code>None</code>。</mark><code>return None</code>可以<mark>简写为<code>return</code>。</mark></p>
<p>在Python交互环境中定义函数时，注意Python会出现<code>...</code>的提示。函数定义结束后需要<mark>按两次回车</mark>重新回到<code>&gt;&gt;&gt;</code>提示符下：</p>
<pre><code class="ascii">│Command Prompt - python                           - □ x │
├────────────────────────────────────────────────────────┤
│&gt;&gt;&gt; def my_abs(x):                                      │
│...     if x &gt;= 0:                                      │
│...         return x                                    │
│...     else:                                           │
│...         return -x                                   │
│...                                                     │
│&gt;&gt;&gt; my_abs(-9)                                          │
│9                                                       │
│&gt;&gt;&gt; _                                                   │
│         
</code></pre>

<p><br></p>
<h3 id="from-import">from import</h3>
<p>如果你已经把<code>my_abs()</code>的函数<mark>定义保存为<code>abstest.py</code>文件了</mark>，那么，可以在该文件的<mark>当前目录下启动Python解释器</mark>，用<code>from abstest import my_abs</code>来导入<code>my_abs()</code>函数，注意<mark><code>abstest</code>是文件名</mark>（不含<code>.py</code>扩展名）：</p>
<pre><code class="ascii">┌────────────────────────────────────────────────────────┐
│Command Prompt - python                           - □ x │
├────────────────────────────────────────────────────────┤
│&gt;&gt;&gt; from abstest import my_abs                          │
│&gt;&gt;&gt; my_abs(-9)                                          │
│9                                                       │
│&gt;&gt;&gt; _                                                   │
│                                                        │
│                                                        │
│                                                        │
│                                                        │
│                                                        │
│                                                        │
│                                                        │
└────────────────────────────────────────────────────────┘
</code></pre>

<p><code>import</code>的用法在后续<a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/0014318447437605e90206e261744c08630a836851f5183000">模块</a>一节中会详细介绍。</p>
<p><br></p>
<h2 id="_2">空函数</h2>
<p>如果想定义一个什么事也不做的空函数，可以<mark>用<code>pass</code>语句</mark>：</p>
<pre><code class="python">def nop():
	pass
</code></pre>

<p><code>pass</code>语句什么都不做，那有什么用？实际上<code>pass</code>可以用来作为<mark>占位符</mark>，比如现在还没想好怎么写函数的代码，就可以先放一个<code>pass</code>，让代码能运行起来。</p>
<p><code>pass</code>还可以用在其他语句里，比如：</p>
<pre><code class="python">if age &gt;= 18:
	pass
</code></pre>

<p>缺少了<code>pass</code>，代码运行就会有语法错误。</p>
<p><br></p>
<h2 id="_3">参数检查</h2>
<p>调用函数时，如果参数个数不对，Python解释器会自动检查出来，并抛出<code>TypeError</code>：</p>
<pre><code class="python">&gt;&gt;&gt; my_abs(1, 2)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: my_abs() takes 1 positional argument but 2 were given
</code></pre>

<p>但是如果参数类型不对，Python解释器就无法帮我们检查。试试<code>my_abs</code>和内置函数<code>abs</code>的差别：</p>
<pre><code class="python">&gt;&gt;&gt; my_abs('A')
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
  File &quot;&lt;stdin&gt;&quot;, line 2, in my_abs
TypeError: unorderable types: str() &gt;= int()
&gt;&gt;&gt; abs('A')
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: bad operand type for abs(): 'str'
</code></pre>

<p>当传入了不恰当的参数时，内置函数<code>abs</code>会检查出参数错误，而我们定义的<code>my_abs</code>没有参数检查，会导致<code>if</code>语句出错，出错信息和<code>abs</code>不一样。所以，这个函数定义不够完善。</p>
<p><br></p>
<h3 id="isinstance">isinstance()</h3>
<p>让我们修改一下<code>my_abs</code>的定义，对参数类型做检查，<mark>只允许整数和浮点数</mark>类型的参数。数据<mark>类型检查可以用内置函数<code>isinstance()</code>实现</mark>：</p>
<pre><code class="python">def my_abs(x):
	if not isinstance(x, (int, float)):
		raise TypeError('bad operand type')
	if x &gt;= 0:
		return x
	else:
		return -x
</code></pre>

<p>添加了参数检查后，如果传入错误的参数类型，函数就可以抛出一个错误：</p>
<pre><code class="python">&gt;&gt;&gt; my_abs('A')
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
  File &quot;&lt;stdin&gt;&quot;, line 3, in my_abs
TypeError: bad operand type
</code></pre>

<p>错误和异常处理将在后续讲到。</p>
<p><br></p>
<h2 id="_4">返回多个值</h2>
<p>函数可以返回多个值吗？答案是肯定的。</p>
<p>比如在游戏中经常需要从一个点移动到另一个点，给出坐标、位移和角度，就可以计算出新的新的坐标：</p>
<pre><code class="python">import math

def move(x, y, step, angle=0):
	nx = x + step * math.cos(angle)
	ny = y - step * math.sin(angle)
	return nx, ny
</code></pre>

<p><code>import math</code>语句表示导入<code>math</code>包，并允许后续代码引用<code>math</code>包里的<code>sin</code>、<code>cos</code>等函数。</p>
<p><br></p>
<h3 id="_5">同时接收多个返回值</h3>
<p>然后，我们就<mark>可以同时获得返回值</mark>：</p>
<pre><code class="python">&gt;&gt;&gt; x, y = move(100, 100, 60, math.pi / 6)
&gt;&gt;&gt; print(x, y)
151.96152422706632 70.0
</code></pre>

<p><br></p>
<h3 id="tuple">返回的是tuple()</h3>
<p>但其实这只是一种假象，Python函数返回的<mark>仍然是单一值</mark>：</p>
<pre><code class="python">&gt;&gt;&gt; r = move(100, 100, 60, math.pi / 6)
&gt;&gt;&gt; print(r)
(151.96152422706632, 70.0)
</code></pre>

<p>原来返回值是一个tuple！但是，在语法上，<mark>返回一个tuple可以省略括号，而多个变量可以同时接收一个tuple，按位置赋给对应的值</mark>，所以，Python的函数返回多值其实就是返回一个tuple，但写起来更方便。</p>
<p><br></p>
<h2 id="_6">练习</h2>
<p>请定义一个函数<code>quadratic(a, b, c)</code>，接收3个参数，返回一元二次方程：</p>
<p>$$ax^{2} + bx + c = 0$$</p>
<p>的两个解。</p>
<p>提示：计算平方根可以调用<code>math.sqrt()</code>函数：</p>
<p>显示当前函数的参数可以用 <code>locals().keys()  ,locals().values()</code>, <code>local()</code> 返回的是一个参数字典。</p>
<pre><code class="python">#!/usr/bin/env python3
# -*- coding: utf-8 -*-

'''
filename: ch03/02.py
message: notes for liaoxuefeng in learning pyhon 3.7
'''

import math

def quadratic(a, b, c = 0):
	'''
	解 a*x^2 + b*x + c = 0 方程的根
	:param a:
	:param b:
	:param c:
	:return:
	'''
	args = locals().values()
	for var in args:
		if not isinstance(var, (int, float)):
			raise TypeError(&quot;a, b, c must be int or float type!!!&quot;)


	# print( locals().keys()  ,locals().values() )

	if a == 0:
		print(&quot;Warnning: 该方程不是一元二次方程!&quot;)
		if b == 0:
			print(&quot;Warnning: 该方程有无数多个实根!&quot;)
			return None, None
		else:
			print(&quot;Warnning: 该方程只有一个实根!&quot;)
	else:
		M = float(b*b - 4 * a * c)
		if M &lt; 0:
			print(&quot;Error: 该方程无实根&quot;)
		else:
			k = math.sqrt(M)
			nx = (-b + k)/(2*a)
			ny = (-b - k)/(2*a)
			return nx, ny


# 测试:
print('quadratic(2, 3, 1) =', quadratic(2, 3, 1))
print('quadratic(1, 3, -4) =', quadratic(1, 3, -4))

if quadratic(2, 3, 1) != (-0.5, -1.0):
	print('测试失败')
elif quadratic(1, 3, -4) != (1.0, -4.0):
	print('测试失败')
else:
	print('测试成功')

quadratic(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;)

</code></pre>


<hr/>
<div class="footer">
	Copyright &copy; xiaoxiyouran. All rights reserved.

</div>

</div> <!-- /container -->

<!---------------------------------------------------------------------------------------------------------------------------->

        </TD>
  </TR>
</TABLE>

<!-- 请注意，以下两个部分的代码执行是有顺序的，必须严格按照这个顺序来。另外，放在底部是为了优化界面，使加载速度更快 -->
<!-- 为了优化代码风格 -->
<script src="../../../../packages/js/jquery-1.9.1.min.js" ></script>
<script src="../../../../packages/js/bootstrap.min.js" ></script>
<script src="../../../../packages/js/highlight.min.js" ></script>
<script >hljs.initHighlightingOnLoad();</script>

<!-- 以下是为了生成文档的侧边栏 -->
<script type="text/javascript" src="../../../../packages/generate_header_sidebar/js/jquery-1.4.4.min.js"></script>
<script type="text/javascript" src="../../../../packages/generate_header_sidebar/js/jquery.ztree.core-3.5.js"></script>
<script type="text/javascript" src="../../../../packages/generate_header_sidebar/src/ztree_toc.js"></script>

<SCRIPT type="text/javascript" >
<!--
$(document).ready(function(){
  $('#tree').ztree_toc({
    is_auto_number : true,
    use_head_anchor: true
  });
});
//-->
</SCRIPT>

</body>
</html>
    